import"./swiper-Bzz70ZAe.js";import{L as h,l as m,B as g,a,s as w,p as f,b as S,h as E,N as y,c as L}from"./settings-Dyn3Vmu5.js";function A(){const e="search-box",t=document.createElement("form"),n=document.createElement("input");return t.classList.add(`${e}`),n.classList.add(`${e}__search`),n.type="search",n.placeholder="Search news",t.append(n),t}const I="https://api.nytimes.com/svc/",C="D8ZjPin6XGFy4rHAEpFEA4ftn16KGFyl",v=1e3*60*5,o=JSON.parse(localStorage.getItem("cache"))??{};async function x(e,t){const n=new URL(`mostpopular/v2/${e}/${t}.json`,I);return N(n)}async function N(e,t=v){if(e.searchParams.append("api-key",C),o[e.href]!==void 0&&o[e.href].expiresAt>Date.now()){const p=Math.round((o[e.href].expiresAt-Date.now())/1e3);return console.log(`Returning cached data. Expires in ${p} seconds`),o[e.href].results}console.log("Fetching new data...");const s=await(await fetch(e)).json();return s.expiresAt=Date.now()+t,o[e.href]=s,localStorage.setItem("cache",JSON.stringify(o)),s.results}const B=document.querySelector("#app"),r=document.createElement("div"),i=await x("viewed",7);console.log(i);const u=A();B.append(h("Newsify",m,u),r,g(a("Home","",E),a("Archive","archive/",S),a("Popular","popular/",f),a("Settings","settings/",w)));u.addEventListener("input",e=>{const t=e.target.value.toLowerCase(),n=i.filter(s=>s.section.toLowerCase().includes(t)||s.title.toLowerCase().includes(t)||s.abstract.toLowerCase().includes(t));d(n)});function d(e){r.innerHTML="";const t=e.map(s=>s.section);[...new Set(t)].sort().forEach(s=>{const l=e.filter(c=>c.section===s).map(c=>y(c));r.append(L(s,l))})}d(i);
