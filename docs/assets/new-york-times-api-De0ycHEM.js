const a="https://api.nytimes.com/svc/",i="D8ZjPin6XGFy4rHAEpFEA4ftn16KGFyl";const t=JSON.parse(localStorage.getItem("cache"))??{};async function p(e,n){const o=new URL(`mostpopular/v2/${e}/${n}.json`,a);return c(o)}async function h(){const e=new URL("topstories/v2/home.json",a);return c(e)}async function c(e,n=3e5){if(e.searchParams.append("api-key",i),t[e.href]!==void 0&&t[e.href].expiresAt>Date.now()){const r=Math.round((t[e.href].expiresAt-Date.now())/1e3);return console.log(`Returning cached data. Expires in ${r} seconds`),t[e.href].results}console.log("Fetching new data...");const s=await(await fetch(e)).json();return s.expiresAt=Date.now()+n,t[e.href]=s,localStorage.setItem("cache",JSON.stringify(t)),s.results}export{p as a,h as g};
