import"./swiper-D9e-pZfW.js";import{L as h,l as g,B as w,a,s as m,b as L,h as f,N as v,c as S}from"./settings-CiqbuEUl.js";function E(){const e="search-box",t=document.createElement("form"),n=document.createElement("input");return t.classList.add(`${e}`),n.classList.add(`${e}__search`),n.type="search",n.placeholder="Search news",t.append(n),t}const y="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%202L15.09%208.26L22%209.27L17%2014.14L18.18%2021.02L12%2017.77L5.82%2021.02L7%2014.14L2%209.27L8.91%208.26L12%202Z'%20stroke='%23404040'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",A="https://api.nytimes.com/svc/",I="D8ZjPin6XGFy4rHAEpFEA4ftn16KGFyl",x=1e3*60*5,o=JSON.parse(localStorage.getItem("cache"))??{};async function C(e,t){const n=new URL(`mostpopular/v2/${e}/${t}.json`,A);return B(n)}async function B(e,t=x){if(e.searchParams.append("api-key",I),o[e.href]!==void 0&&o[e.href].expiresAt>Date.now()){const p=Math.round((o[e.href].expiresAt-Date.now())/1e3);return console.log(`Returning cached data. Expires in ${p} seconds`),o[e.href].results}console.log("Fetching new data...");const s=await(await fetch(e)).json();return s.expiresAt=Date.now()+t,o[e.href]=s,localStorage.setItem("cache",JSON.stringify(o)),s.results}const N=document.querySelector("#app"),r=document.createElement("div"),i=await C("viewed",7);console.log(i);const d=E();N.append(h("Newsify",g,d),r,w(a("Home","./",f),a("Archive","./archive/",L),a("Popular","./popular/",y),a("Settings","./settings/",m)));d.addEventListener("input",e=>{const t=e.target.value.toLowerCase(),n=i.filter(s=>s.section.toLowerCase().includes(t)||s.title.toLowerCase().includes(t)||s.abstract.toLowerCase().includes(t));u(n)});function u(e){r.innerHTML="";const t=e.map(s=>s.section);[...new Set(t)].sort().forEach(s=>{const l=e.filter(c=>c.section===s).map(c=>v(c));r.append(S(s,l))})}u(i);
