import"./style-BdrSOVt3.js";function m(e,s,c){const t="news-card",a=document.createElement("div"),o=document.createElement("h2"),r=document.createElement("p"),i=document.createElement("img");return a.classList.add(`${t}`),o.classList.add(`${t}__title`),r.classList.add(`${t}__content`),i.classList.add(`${t}__image`),o.textContent=e,r.textContent=s,i.src=c,a.append(i,o,r),a}const p="https://api.nytimes.com/svc/",l="D8ZjPin6XGFy4rHAEpFEA4ftn16KGFyl",E=1e3*60*5,n=JSON.parse(localStorage.getItem("cache"))??{};async function h(e,s){const c=new URL(`mostpopular/v2/${e}/${s}.json`,p);return u(c)}async function u(e,s=E){if(e.searchParams.append("api-key",l),n[e.href]!==void 0&&n[e.href].expiresAt>Date.now()){const a=Math.round((n[e.href].expiresAt-Date.now())/1e3);return console.log(`Returning cached data. Expires in ${a} seconds`),n[e.href].results}console.log("Fetching new data...");const t=await(await fetch(e)).json();return t.expiresAt=Date.now()+s,n[e.href]=t,localStorage.setItem("cache",JSON.stringify(n)),t.results}const f=document.querySelector("#app"),d=await h("viewed",7),g=d.map(e=>m(e.title,e.abstract,e.media[0]["media-metadata"][0].url));console.log(d);f.append(...g);
